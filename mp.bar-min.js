/*!
 * g.Raphael 0.4.1 - Charting library, based on RaphaÃ«l
 *
 * Copyright (c) 2009 Pawel Wilk (pwilkmielno@gmail.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael.fn.g.mpbarchart=function(m,k,w,r,e,p){p=p||{};var n=this,F=Math.max.apply(Math,e),l=p.colors||["0-#eee-#f00","0-#eee-#0f0","0-#eee-#00f"];total=0,percents=[],lengths=[],paths=[];var u=p.barMaxLength||190,C=p.barHeight||26,A=p.barMargin||8,E=p.barsMarginTop||8,q=p.barsMarginLeft||0,h=p.triangleHeight||12;valueSize=p.valueSize||Math.round(C*0.9),valueColor=p.valueColor||"#ffffff",valueColorOutside=p.valueColorOutside||"#444444",marginTextTop=p.marginTextTop||0,chartDirection=p.chartDirection||"ltr";if(chartDirection=="rtl"){var J=l,j;l=[];for(var m in J){j=J[m].split("-");if(j.length==3){j[0]="180"}l.push(j.join("-"))}}for(var m in e){total+=e[m]}for(var m in e){percents.push(Math.round((e[m]/total)*100));lengths.push(Math.round((e[m]*u)/F))}var I=E,i,a,K,v,o=Math.round(C/2),t=Math.round((C-valueSize)/2)+marginTextTop,H,G,D,B,z,g,f,d,c,b,s;for(var m in lengths){i=lengths[m]-h+q;H=q;g=I;G=i;f=g;D=(h+i);d=(g+o);B=i;c=(g+C);z=q;b=(g+C);if(chartDirection=="rtl"){H=w-H;G=w-G;D=w-D;B=w-B;z=w-z}K=["M",H,g,"L",G,f,"L",D,d,"L",B,c,"L",z,b,"Z"];n.path(K).attr("fill",l[m%l.length]).attr("stroke","none");v=n.text(G,I+t+k+E,percents[m]+"%").attr({"font-size":valueSize,fill:valueColor});if(v.getBBox().width<i){v.attr("text-anchor",(chartDirection=="rtl"?"start":"end"))}else{s=G+h;if(chartDirection=="rtl"){s=G-h}v.attr({x:s,fill:valueColorOutside,"text-anchor":(chartDirection=="rtl"?"end":"start")})}I=I+C+A}};