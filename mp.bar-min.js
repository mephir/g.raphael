/*!
 * g.Raphael 0.4.1 - Charting library, based on RaphaÃ«l
 *
 * Copyright (c) 2009 Pawel Wilk (pwilkmielno@gmail.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael.fn.g.mpbarchart=function(g,e,p,l,b,j){j=j||{};var h=this,t=Math.max.apply(Math,b),f=j.colors||["0-#eee-#f00","0-#eee-#0f0","0-#eee-#00f"];total=0,percents=[],lengths=[],paths=[];var n=j.barMaxLength||190,r=j.barHeight||26,q=j.barMargin||8,s=j.barsMarginTop||8,k=j.barsMarginLeft||0,c=j.triangleHeight||12;valueSize=j.valueSize||Math.round(r*0.9),valueColor=j.valueColor||"#ffffff",valueColorOutside=j.valueColorOutside||"#444444",marginTextTop=j.marginTextTop||0;for(var g in b){total+=b[g]}for(var g in b){percents.push(Math.round((b[g]/total)*100));lengths.push(Math.round((b[g]*n)/t))}var u=s,d,a,v,o,i=Math.round(r/2),m=Math.round((r-valueSize)/2)+marginTextTop;for(var g in lengths){d=lengths[g]-c+k;v=["M",k,u,"L",d,u,"L",(c+d),(u+i),"L",d,(u+r),"L",k,(u+r),"Z"];h.path(v).attr("fill",f[g%f.length]).attr("stroke","none");o=h.text(d,u+m+e+s,percents[g]+"%").attr({"font-size":valueSize,fill:valueColor});if(o.getBBox().width<d){o.attr("text-anchor","end")}else{o.attr({x:(d+c),fill:valueColorOutside,"text-anchor":"start"})}u=u+r+q}};